<script src="<?php echo base_url()?>template/jquery.min.js"></script><script src="<?php echo base_url()?>template/assets/vendors/js/vendor.bundle.base.js"></script><script src="<?php echo base_url()?>template/assets/vendors/js/vendor.bundle.addons.js"></script><script src="<?php echo base_url()?>template/DataTables/datatables.js"></script><script src="<?php echo base_url()?>template/bootstrap-select/select.js"></script><script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script><script src="<?php echo base_url()?>template/assets/js/shared/off-canvas.js"></script><script src="<?php echo base_url()?>template/assets/js/shared/misc.js"></script><script src="<?php echo base_url()?>template/assets/js/demo_1/dashboard.js"></script><script src="<?php echo base_url()?>template/jQuery-Mask-Plugin-master/src/jquery.mask.js"></script><script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script><script type="text/javascript">$(document).ready( function () {$('select').select2({theme: 'classic'});$('.number').mask('00-0000-0000-000');var table = $('#myTable').DataTable({<?php if ($this->session->userdata('Role') == '1') {?>ajax: '<?php echo base_url()?>Pengiriman/get_all',<?php } elseif ($this->session->userdata('Role') == '2') {?>ajax: '<?php echo base_url()?>Pengiriman/get',<?php } else {?>ajax: '<?php echo base_url()?>Pengiriman/get_cabang',<?php } ?>scrollX: true,columns: [{ data: 'NoResi' },{ data: 'NamaPerusahaan' },{ data: 'NamaCabang' },{ data: 'Pengirim' },{ data: 'NoTelpPengirim' },{ data: 'Penerima' },{ data: 'NoTelpPenerima' },{ data: 'AlamatPenerima' },{ data: 'Status',render: function(data, type, row) {if (data === '0') {return 'Pengiriman Di Batalkan'}if (data === '1') {return 'Terkirim'}if (data === '2') {return 'Pengiriman Kurir'}if (data === '3') {return 'Di Terima Oleh Cabang'}if (data === '4') {return 'Pengiriman Ke Cabang'}if (data === '5') {return 'Belum Di Proses'}}},{data: null,className: "dt-center updatePengiriman",defaultContent: '<button class="btn btn-warning updatePengiriman" data-toggle="modal" data-target="#modalPengiriman"><i class="fa fa-pencil"></i> Update</button>',orderable: false},{data: null,className: "dt-center deletePengiriman",defaultContent: '<button class="btn btn-danger delete"><i class="fa fa-trash"></i> Delete</button'}]});$.fn.dataTable.ext.errMode = 'none';$("#addPenerimaan").on("click", function() {$('#updateForm').hide();$('#addForm').show();$('#NoResi').val('');$('#IdPerusahaan').val('');$('#IdCabang').val('');$('#IdPerusahaan').trigger('change');$('#IdCabang').trigger('change');$('#Pengirim').val('');$('#NoTelpPengirim').val('');$('#Penerima').val('');$('#NoTelpPenerima').val('');$('#AlamatPenerima').val('');$('#Status').val('');$('#Status').trigger('change');});$("#addForm").on("click", function() {$('#addForm').prop('disabled', true);$.ajax({type: "post",url: "<?php echo base_url() ?>Pengiriman/post",data: "NoResi="+$('#NoResi').val()+"&IdPerusahaan="+$('#IdPerusahaan').val()+"&IdCabang="+$('#IdCabang').val()+"&Pengirim="+$('#Pengirim').val()+"&NoTelpPengirim="+$('#NoTelpPengirim').val()+"&Penerima="+$('#Penerima').val()+"&NoTelpPenerima="+$('#NoTelpPenerima').val()+"&AlamatPenerima="+$('#AlamatPenerima').val()+"&Status="+$('#Status').val(),dataType: "json",success: function (hasil) {$('#addForm').prop('disabled', false);$('#modalPengiriman').modal().hide();$(".modal-backdrop").remove();if (!hasil.message) {Swal.fire('Berhasil!','Berhasil Menambahkan = '+hasil[0].affectedRows+' Data','success');table.ajax.reload();}else{Swal.fire({icon: 'error',title: 'Oops...',text: hasil.message,})}}});});$("#myTable").on("click", 'td.updatePengiriman', function() {console.log(table.row(this).data());const data = table.row(this).data();$('#updateForm').show();$('#addForm').hide();$('#NoResi').val(data.NoResi);$('#IdPerusahaan').val(data.IdPerusahaan);$('#IdPerusahaan').trigger('change');$('#IdCabang').val(data.IdCabang);$('#IdCabang').trigger('change');$('#Pengirim').val(data.Pengirim);$('#NoTelpPengirim').val(data.NoTelpPengirim);$('#Penerima').val(data.Penerima);$('#NoTelpPenerima').val(data.NoTelpPenerima);$('#AlamatPenerima').val(data.AlamatPenerima);$('#Status').val(data.Status);$('#Status').trigger('change');});$("#updateForm").on("click", function() {$('#updateForm').prop('disabled', true);$.ajax({type: "post",url: "<?php echo base_url() ?>Pengiriman/put",data: "NoResi="+$('#NoResi').val()+"&IdPerusahaan="+$('#IdPerusahaan').val()+"&IdCabang="+$('#IdCabang').val()+"&Pengirim="+$('#Pengirim').val()+"&NoTelpPengirim="+$('#NoTelpPengirim').val()+"&Penerima="+$('#Penerima').val()+"&NoTelpPenerima="+$('#NoTelpPenerima').val()+"&AlamatPenerima="+$('#AlamatPenerima').val()+"&Status="+$('#Status').val(),dataType: "json",success: function (hasil) {$('#updateForm').prop('disabled', false);$('#modalPengiriman').modal().hide();$(".modal-backdrop").remove();if (!hasil.message) {Swal.fire('Berhasil!','Berhasil '+hasil[0].info,'success');table.ajax.reload();}else{Swal.fire({icon: 'error',title: 'Oops...',text: hasil.message,})}}});});$("#myTable").on("click", 'td.deletePengiriman', function() {console.log(table.row(this).data());const data = table.row(this).data();$('td.deletePengiriman').prop('disabled', true);Swal.fire({title: 'Are you sure?',text: "You won't be able to revert this!",icon: 'warning',showCancelButton: true,confirmButtonColor: '#3085d6',cancelButtonColor: '#d33',confirmButtonText: 'Yes, delete it!'}).then((result) => {$('td.deletePengiriman').prop('disabled', false);if (result.isConfirmed) {$.ajax({type: "post",url: "<?php echo base_url() ?>Pengiriman/delete",data: "NoResi="+data.NoResi,dataType: "json",success: function (hasil) {$('td.deletePengiriman').prop('disabled', false);if (!hasil.message) {Swal.fire('Deleted!','Your file has been deleted.','success');table.ajax.reload();}else{Swal.fire({icon: 'error',title: 'Oops...',text: hasil.message,})}}});}})})} );</script>