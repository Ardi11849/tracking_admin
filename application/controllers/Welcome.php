<?php
defined('BASEPATH') OR exit('No direct script access allowed');class Welcome extends CI_Controller {
var $api_url = 'https://damp-shore-65068.herokuapp.com/';public function index(){$this->load->view('welcome_message');}public function Login(){$data = $this->curl->simple_get($this->api_url.'api/v1/Login?Username='.$this->input->post("Username").'&Password='.urlencode($this->input->post("Password")));$decode = json_decode($data, true);if (!$data) {echo "500";}else if ($decode["data"] == null) {echo "0";}else{if ($decode["data"][0]["StatusPerusahaan"] == 0) {echo "401";}else{$this->session->set_userdata('Id', $decode["data"][0]["IdUsers"]);$this->session->set_userdata('Username', $decode["data"][0]["Username"]);$this->session->set_userdata('Role', $decode["data"][0]["Role"]);$this->session->set_userdata('IdPerusahaan', $decode["data"][0]["IdPerusahaan"]);if (isset($decode["data"][0]["IdCabang"])) {$this->session->set_userdata('IdCabang', $decode["data"][0]["IdCabang"]);}echo $data;}}}public function Logout(){$this->session->sess_destroy();redirect(base_url());}
}
